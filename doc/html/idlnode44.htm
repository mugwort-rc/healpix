<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>ud_grade</TITLE>
<META NAME="description" CONTENT="ud_grade">
<META NAME="keywords" CONTENT="idl">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="idl.css">

<LINK REL="next" HREF="idlnode45.htm">
<LINK REL="previous" HREF="idlnode43.htm">
<LINK REL="up" HREF="idl.htm">
<LINK REL="next" HREF="idlnode45.htm">
</HEAD>

<BODY >

<DIV CLASS="navigation"><body text="#000000" bgcolor="#FFFFFA">
<!--Navigation Panel-->
<A NAME="tex2html621"
  HREF="idlnode43.htm">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html627"
  HREF="idl.htm">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html631"
  HREF="idlnode45.htm">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html629"
  HREF="idlnode1.htm">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Previous:</B> <A NAME="tex2html622"
  HREF="idlnode43.htm">template_pixel_nest, template_pixel_ring</A>

<B>Up:</B> <A NAME="tex2html628"
  HREF="idl.htm">Healpix/IDL subroutines</A>

<B> Next:</B> <A NAME="tex2html632"
  HREF="idlnode45.htm">vec2ang</A>
<B> Top:</B> <a href="main.htm">Main Page</a></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION000440000000000000000"></A>
<A NAME="idl:ud_grade"></A>
<BR>
 
</H1>

<P>
<b><font size=+6><FONT COLOR="#CC0000">ud_grade</FONT></font></b><hr><H2>This IDL facility provides a means to upgrade/degrade or <A HREF="idlnode40.htm#idl:reorder">reorder</A> a Healpix full
sky map contained in a FITS file or loaded in memory.
</H2><br>Location in HEALPix directory tree: <b>
src/idl/toolkit/ud_grade.pro
</b>

<P>
<hr><h1>FORMAT </h1><h2>IDL>
UD_GRADE , Map_in, Map_out [, NSIDE_OUT=, ORDER_IN=, ORDER_OUT=, BAD_DATA=]
</h2>

<P>
<hr><H1>QUALIFIERS</H1>
<BR> 
  <DL COMPACT><DT>
<B>Map_in</B>
<DD>input map: either a character string with the name of a fits file 
      or a memory vector (real, integer, ...) containing a full sky Healpix data
      set.
    <DT>
<B>Map_out</B>
<DD><A HREF="idlnode40.htm#idl:reorder">reorder</A>ed map: if map_in was a filename, map_out should be
    a filename, otherwise map_out should point to a memory array
  </DL>

<P>
<hr><H1>KEYWORDS</H1>
<BR> 
  <DL COMPACT><DT>
<B>NSIDE_OUT =</B>
<DD>output resolution parameter, can be
    larger or smaller than the input one (scalar integer).
	 <b>default:</b>same as input: map unchanged or simply <A HREF="idlnode40.htm#idl:reorder">reorder</A>ed
    <DT>
<B>ORDER_IN =</B>
<DD>input map ordering (either 'RING' or 'NESTED')
	<b>default:</b>same as the input FITS keyword ORDERING if applicable.
    <DT>
<B>ORDER_IN =</B>
<DD>output map ordering (either 'RING' or 'NESTED')
	<b>default:</b>same as ORDER_IN.
    <DT>
<B>BAD_DATA =</B>
<DD>flag value of missing pixels.
          <b>default:</b><TT>!healpix.bad_value</TT> <!-- MATH
 $\equiv -1.6375\ 10^{30}$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="131" HEIGHT="42" ALIGN="MIDDLE" BORDER="0"
 SRC="idlimg39.png"
 ALT="$\equiv -1.6375\ 10^{30}$"></SPAN>.
    <DT>
<B>PESSIMISTIC =</B>
<DD><IMG
 WIDTH="282" HEIGHT="173" ALIGN="MIDDLE" BORDER="0"
 SRC="idlimg45.png"
 ALT="$\textstyle \parbox{0.5\hsize}{if set, during {\bf degradation} each big pixel c...
...ast one good pixel
is considered as good (optimistic)
default = 0 (:not set)}$"></DL>

<P>
<hr><H1>DESCRIPTION</H1>
<BR> <blockquote>
ud_grade can upgrade/degrade a full sky <b>HEALPix</b> map using the hierarchical
properties of <b>HEALPix</b> . It can also <A HREF="idlnode40.htm#idl:reorder">reorder</A> a full sky map (from NEST to RING and
vice-versa). It operates on FITS files as well as on memory variables.
The degradation/upgradation is done assuming an
intensive quantity (like temperature) that does not scale with surface area. 
In case of degradation a big pixel that contains at least one bad small pixel is
considered as bad itself. When operating on FITS files, the header information
from the input file that is not directly related the ordering/resolution is
copied unchanged into the output file.
</blockquote>

<P>
<hr><H1>RELATED ROUTINES</H1><h3>This section lists the routines related to <b><FONT COLOR="#CC0000">ud_grade</FONT></b></h3>
<BR> 
  <DL COMPACT><DT>
<B>idl</B>
<DD>version 5.0 or more is necessary to run ud_grade .
    <DT>
<B><A HREF="idlnode40.htm#idl:reorder">reorder</A></B>
<DD>reorder a full sky Healpix map.
  </DL>

<P>
<hr><H1>EXAMPLE # 1:</H1><tt><FONT SIZE=+1>
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT">
ud_grade ,</TD>
<TD ALIGN="LEFT">'map_512.fits', 'map_256.fits', nside_out = 256</TD>
</TR>
</TABLE>
</font></tt><br><blockquote>
ud_grade reads the FITS file map_512.fits (that allegedly contains a map with
NSIDE=512), and write in the FITS file map_256.fits a map degraded to resolution 256, with
the same ordering.
</blockquote>
<hr><H1>EXAMPLE # 2:</H1><tt><FONT SIZE=+1>
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT">
ud_grade ,</TD>
<TD ALIGN="LEFT">'map_512.fits', 'map_Nest256.fits', nside_out = 256, $</TD>
</TR>
<TR><TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">order_out = 'NESTED'</TD>
</TR>
</TABLE>
</font></tt><br><blockquote>
ud_grade reads the FITS file map_512.fits (that allegedly contains a map with
NSIDE=512), 
and writes in the FITS file map_Nest256.fits a map degraded to resolution 256,
with NESTED ordering.
</blockquote>
<hr><H1>EXAMPLE # 3:</H1><tt><FONT SIZE=+1>
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT">
<A HREF="idlnode36.htm#idl:read_fits_map">read_fits_map</A>,</TD>
<TD ALIGN="LEFT">'map_Nest256.fits', mymap</TD>
</TR>
<TR><TD ALIGN="LEFT">ud_grade ,</TD>
<TD ALIGN="LEFT">mymap, mymap2, nside_out = 1024, order_in='NESTED', $</TD>
</TR>
<TR><TD ALIGN="LEFT">&nbsp;</TD>
<TD ALIGN="LEFT">order_out='RING'</TD>
</TR>
</TABLE>
</font></tt><br><blockquote>
mymap is IDL variable containing a <b>HEALPix</b> NESTED-ordered map with resolution nside=256.
ud_grade upgrades this map to a resolution of 1024, reorder it to RING and write
it in the IDL vector mymap2.
</blockquote>

<P>

<P>

<P>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html621"
  HREF="idlnode43.htm">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html627"
  HREF="idl.htm">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html631"
  HREF="idlnode45.htm">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html629"
  HREF="idlnode1.htm">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Previous:</B> <A NAME="tex2html622"
  HREF="idlnode43.htm">template_pixel_nest, template_pixel_ring</A>

<B>Up:</B> <A NAME="tex2html628"
  HREF="idl.htm">Healpix/IDL subroutines</A>

<B> Next:</B> <A NAME="tex2html632"
  HREF="idlnode45.htm">vec2ang</A>
<B> Top:</B> <a href="main.htm">Main Page</a></DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Eric Hivon
2005-08-31
</ADDRESS>
</BODY>
</HTML>
