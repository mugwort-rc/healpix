<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>rotmatrix.h Source File</title>
<link href="sheet.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>rotmatrix.h</h1><a href="rotmatrix_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> *  This file is part of Healpix_cxx.</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *  Healpix_cxx is free software; you can redistribute it and/or modify</span>
00005 <span class="comment"> *  it under the terms of the GNU General Public License as published by</span>
00006 <span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span>
00007 <span class="comment"> *  (at your option) any later version.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *  Healpix_cxx is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> *  GNU General Public License for more details.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> *  You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> *  along with Healpix_cxx; if not, write to the Free Software</span>
00016 <span class="comment"> *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> *  For more information about HEALPix, see http://healpix.jpl.nasa.gov</span>
00019 <span class="comment"> */</span>
00020 
00021 <span class="comment">/*</span>
00022 <span class="comment"> *  Healpix_cxx is being developed at the Max-Planck-Institut fuer Astrophysik</span>
00023 <span class="comment"> *  and financially supported by the Deutsches Zentrum fuer Luft- und Raumfahrt</span>
00024 <span class="comment"> *  (DLR).</span>
00025 <span class="comment"> */</span>
00026 <span class="comment"></span>
00027 <span class="comment">/*! \file rotmatrix.h</span>
00028 <span class="comment"> *  Class for rotation transforms in 3D space</span>
00029 <span class="comment"> *</span>
00030 <span class="comment"> *  Copyright (C) 2003 Max-Planck-Society</span>
00031 <span class="comment"> *  \author Martin Reinecke</span>
00032 <span class="comment"> */</span>
00033 
00034 <span class="preprocessor">#ifndef PLANCK_ROTMATRIX_H</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define PLANCK_ROTMATRIX_H</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#include &lt;iostream&gt;</span>
00038 <span class="preprocessor">#include "<a class="code" href="cxxutils_8h.html">cxxutils.h</a>"</span>
00039 <span class="preprocessor">#include "<a class="code" href="vec3_8h.html">vec3.h</a>"</span>
00040 <span class="comment"></span>
00041 <span class="comment">/*! \defgroup rotmatrixgroup Rotation matrices */</span><span class="comment"></span>
00042 <span class="comment">/*! \{ */</span>
00043 <span class="comment"></span>
00044 <span class="comment">/*! Class for rotation transforms in 3D space */</span>
<a name="l00045"></a><a class="code" href="classrotmatrix.html">00045</a> <span class="keyword">class </span><a class="code" href="classrotmatrix.html">rotmatrix</a>
00046   {
00047   <span class="keyword">public</span>:
00048     <span class="keywordtype">double</span> entry[3][3];
00049 
00050     <a class="code" href="classrotmatrix.html#a1">rotmatrix</a> () {}
00051 <span class="comment"></span>
00052 <span class="comment">    /*! Constructs a rotation matrix from its nine entries */</span>
<a name="l00053"></a><a class="code" href="classrotmatrix.html#a1">00053</a>     <a class="code" href="classrotmatrix.html#a1">rotmatrix</a> (<span class="keywordtype">double</span> a00, <span class="keywordtype">double</span> a01, <span class="keywordtype">double</span> a02,
00054                <span class="keywordtype">double</span> a10, <span class="keywordtype">double</span> a11, <span class="keywordtype">double</span> a12,
00055                <span class="keywordtype">double</span> a20, <span class="keywordtype">double</span> a21, <span class="keywordtype">double</span> a22)
00056       {
00057       entry[0][0]=a00; entry[0][1]=a01; entry[0][2]=a02;
00058       entry[1][0]=a10; entry[1][1]=a11; entry[1][2]=a12;
00059       entry[2][0]=a20; entry[2][1]=a21; entry[2][2]=a22;
00060       }
00061 <span class="comment"></span>
00062 <span class="comment">    /*! Constructs a rotation matrix so that \a a is the first column,</span>
00063 <span class="comment">        \a b is the second column and \a c is the third column.</span>
00064 <span class="comment">        \note The vectors \a a, \a b and \a c must form an orthonormal system!</span>
00065 <span class="comment">     */</span>
00066     <a class="code" href="classrotmatrix.html#a1">rotmatrix</a> (<span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;a, <span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;b, <span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;c);
00067 <span class="comment"></span>
00068 <span class="comment">    /*! Sets the matrix to the identity matrix. */</span>
00069     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a3">SetToIdentity</a> ();<span class="comment"></span>
00070 <span class="comment">    /*! Sets all matrix elements to zero. */</span>
00071     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a4">SetToZero</a> ();<span class="comment"></span>
00072 <span class="comment">    /*! Transposes the matrix. */</span>
00073     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a5">Transpose</a> ();
00074 <span class="comment"></span>
00075 <span class="comment">    /*! Extracts a unit-length rotation axis \a axis and a rotation angle</span>
00076 <span class="comment">        \a angle from the matrix. */</span>
00077     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a6">toAxisAngle</a> (<a class="code" href="classvec3.html">vec3</a> &amp;axis, <span class="keywordtype">double</span> &amp;angle) <span class="keyword">const</span>;
00078 <span class="comment"></span>
00079 <span class="comment">    /*! Constructs a matrix which causes a rotation by \a angle around</span>
00080 <span class="comment">        \a axis. \a axis must have unit length. */</span>
<a name="l00081"></a><a class="code" href="classrotmatrix.html#a7">00081</a>     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a7">Make_Axis_Rotation_Transform</a> (<span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;axis, <span class="keywordtype">double</span> angle)
00082       {
00083       <span class="keywordtype">double</span> sa=sin(angle), ca=cos(angle);
00084       <span class="keywordtype">double</span> ica=1-ca;
00085       entry[0][0] = axis.<a class="code" href="classvec3.html#o0">x</a>*axis.<a class="code" href="classvec3.html#o0">x</a>*ica + ca;
00086       entry[1][1] = axis.<a class="code" href="classvec3.html#o1">y</a>*axis.<a class="code" href="classvec3.html#o1">y</a>*ica + ca;
00087       entry[2][2] = axis.<a class="code" href="classvec3.html#o2">z</a>*axis.<a class="code" href="classvec3.html#o2">z</a>*ica + ca;
00088       <span class="keywordtype">double</span> t1 = axis.<a class="code" href="classvec3.html#o0">x</a>*axis.<a class="code" href="classvec3.html#o1">y</a>*ica, t2 = axis.<a class="code" href="classvec3.html#o2">z</a>*sa;
00089       entry[1][0] = t1 + t2;
00090       entry[0][1] = t1 - t2;
00091       t1 = axis.<a class="code" href="classvec3.html#o0">x</a>*axis.<a class="code" href="classvec3.html#o2">z</a>*ica; t2 = axis.<a class="code" href="classvec3.html#o1">y</a>*sa;
00092       entry[2][0] = t1 - t2;
00093       entry[0][2] = t1 + t2;
00094       t1 = axis.<a class="code" href="classvec3.html#o1">y</a>*axis.<a class="code" href="classvec3.html#o2">z</a>*ica; t2 = axis.<a class="code" href="classvec3.html#o0">x</a>*sa;
00095       entry[1][2] = t1 - t2;
00096       entry[2][1] = t1 + t2;
00097       }
00098 <span class="comment"></span>
00099 <span class="comment">    /*! Creates a rotation matrix \a A, which performs the following operations</span>
00100 <span class="comment">        on a vector \a v, when \a Av is calculated:</span>
00101 <span class="comment">        -# rotate \a v around the z-axis by \a gamma,</span>
00102 <span class="comment">        -# rotate \a v' around the y-axis by \a beta,</span>
00103 <span class="comment">        -# rotate \a v'' around the z-axis by \a alpha.</span>
00104 <span class="comment"></span>
00105 <span class="comment">        \note \a alpha, \a beta and \a gamma are given in radians,</span>
00106 <span class="comment">              the rotations are right handed.</span>
00107 <span class="comment"></span>
00108 <span class="comment">        \note This transformation rotates the \e vectors, not the coordinate</span>
00109 <span class="comment">              axes! */</span>
00110     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a8">Make_CPAC_Euler_Matrix</a> (<span class="keywordtype">double</span> alpha, <span class="keywordtype">double</span> beta, <span class="keywordtype">double</span> gamma);
00111 <span class="comment"></span>
00112 <span class="comment">    /*! Extracts the Euler angles \a alpha, \a beta and \a gamma from the</span>
00113 <span class="comment">        matrix. For their definition see Make_CPAC_Euler_Matrix().</span>
00114 <span class="comment"></span>
00115 <span class="comment">        \note In case of ambiguity \a alpha will be 0. */</span>
00116     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a9">Extract_CPAC_Euler_Angles</a>
00117       (<span class="keywordtype">double</span> &amp;alpha, <span class="keywordtype">double</span> &amp;beta, <span class="keywordtype">double</span> &amp;gamma) <span class="keyword">const</span>;
00118 <span class="comment"></span>
00119 <span class="comment">    /*! Returns the vector \a vec, transformed by the matrix. */</span>
<a name="l00120"></a><a class="code" href="classrotmatrix.html#a10">00120</a>     <a class="code" href="classvec3.html">vec3</a> <a class="code" href="classrotmatrix.html#a10">Transform</a> (<span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;vec)<span class="keyword"> const</span>
00121 <span class="keyword">      </span>{
00122       <span class="keywordflow">return</span> <a class="code" href="classvec3.html">vec3</a>
00123         (vec.<a class="code" href="classvec3.html#o0">x</a>*entry[0][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[0][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[0][2],
00124          vec.<a class="code" href="classvec3.html#o0">x</a>*entry[1][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[1][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[1][2],
00125          vec.<a class="code" href="classvec3.html#o0">x</a>*entry[2][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[2][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[2][2]);
00126       }<span class="comment"></span>
00127 <span class="comment">    /*! Returns the vector \a vec, transformed by the matrix, in \a vec2. */</span>
<a name="l00128"></a><a class="code" href="classrotmatrix.html#a11">00128</a>     <span class="keywordtype">void</span> <a class="code" href="classrotmatrix.html#a10">Transform</a> (<span class="keyword">const</span> <a class="code" href="classvec3.html">vec3</a> &amp;vec, <a class="code" href="classvec3.html">vec3</a> &amp;vec2)<span class="keyword"> const</span>
00129 <span class="keyword">      </span>{
00130       vec2.<a class="code" href="classvec3.html#o0">x</a> = vec.<a class="code" href="classvec3.html#o0">x</a>*entry[0][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[0][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[0][2];
00131       vec2.<a class="code" href="classvec3.html#o1">y</a> = vec.<a class="code" href="classvec3.html#o0">x</a>*entry[1][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[1][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[1][2];
00132       vec2.<a class="code" href="classvec3.html#o2">z</a> = vec.<a class="code" href="classvec3.html#o0">x</a>*entry[2][0] + vec.<a class="code" href="classvec3.html#o1">y</a>*entry[2][1] + vec.<a class="code" href="classvec3.html#o2">z</a>*entry[2][2];
00133       }
00134   };
00135 <span class="comment"></span>
00136 <span class="comment">/*! Returns \a a * \a b.</span>
00137 <span class="comment">    \relates rotmatrix */</span>
00138 <a class="code" href="classrotmatrix.html">rotmatrix</a> operator* (<span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;a, <span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;b);<span class="comment"></span>
00139 <span class="comment">/*! Returns \a a * \a b in \a res.</span>
00140 <span class="comment">    \relates rotmatrix */</span>
<a name="l00141"></a><a class="code" href="classrotmatrix.html#a1">00141</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> matmult (<span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;a, <span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;b, <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;res)
00142   {
00143   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;3; ++i)
00144     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;3; ++j)
00145       res.<a class="code" href="classrotmatrix.html#o0">entry</a>[i][j] = a.<a class="code" href="classrotmatrix.html#o0">entry</a>[i][0] * b.<a class="code" href="classrotmatrix.html#o0">entry</a>[0][j]
00146                       + a.<a class="code" href="classrotmatrix.html#o0">entry</a>[i][1] * b.<a class="code" href="classrotmatrix.html#o0">entry</a>[1][j]
00147                       + a.<a class="code" href="classrotmatrix.html#o0">entry</a>[i][2] * b.<a class="code" href="classrotmatrix.html#o0">entry</a>[2][j];
00148   }
00149 <span class="comment"></span>
00150 <span class="comment">/*! Returns \a a^T * \a b in \a res.</span>
00151 <span class="comment">    \relates rotmatrix */</span>
00152 <span class="keywordtype">void</span> TransposeTimes (<span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;a, <span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;b, <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;res);
00153 <span class="comment"></span>
00154 <span class="comment">/*! Writes \a mat to \a os.</span>
00155 <span class="comment">    \relates rotmatrix */</span>
00156 std::ostream &amp;operator&lt;&lt; (std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="classrotmatrix.html">rotmatrix</a> &amp;mat);
00157 <span class="comment"></span>
00158 <span class="comment">/*! \} */</span>
00159 
00160 <span class="preprocessor">#endif</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Thu Feb 19 17:23:13 2009 for LevelS C++ support library
</a> </small></address>
</body>
</html>
